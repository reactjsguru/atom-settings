{"version":3,"file":"node-launcher.js","sourceRoot":"","sources":["../../src/plugin/node-launcher.ts"],"names":[],"mappings":";;;;;;;;;;;;AAAA,iEAAsF;AACtF,6BAAoC;AACpC,iCAAyC;AAEzC;IAAkC,gCAA+B;IAAjE;;IAyCA,CAAC;IAnCC,2CAAoB,GAApB;QACE,IAAI,SAAS,GAAG;YACd,mBAAiB,IAAI,CAAC,UAAY;SACnC,CAAA;QACD,EAAE,CAAC,CAAC,YAAG,CAAC,IAAI,EAAE,mBAAmB,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;YACvC,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC,CAAA;QAC7C,CAAC;QACD,IAAI,YAAY,GAAG,SAAS,CAAC,MAAM,CAAC,IAAI,CAAC,eAAe,CAAC,CAAA;QACzD,MAAM,CAAC,YAAY,CAAA;IACrB,CAAC;IACD,wCAAiB,GAAjB;QACE,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC;YACd,IAAI,CAAC,GAAG,GAAG,cAAO,CAAC,YAAG,CAAC,IAAI,EAAE,YAAY,EAAE,EAAE,CAAC,CAAC,CAAA;QACjD,CAAC;QACD,IAAI,OAAO,GAAG,YAAG,CAAC,OAAO,EAAE,UAAU,CAAC,CAAA;QACtC,IAAI,OAAO,GAAG,WAAI,CAAC,IAAI,CAAC,GAAG,EAAE,cAAc,EAAE,MAAM,CAAC,CAAA;QACpD,MAAM,CAAC;YACL,KAAK,EAAE,IAAI;YAEX,GAAG,EAAE,IAAI,CAAC,GAAG;YACb,GAAG,EAAE,eAAM,CAAC;gBACV,KAAK,EAAE,YAAG,CAAC,OAAO,EAAE,WAAW,CAAC;gBAChC,IAAI,EAAE,YAAG,CAAC,OAAO,EAAE,UAAU,CAAC;gBAC9B,MAAM,EAAE,YAAG,CAAC,OAAO,EAAE,YAAY,CAAC;gBAClC,IAAI,EAAE,YAAG,CAAC,OAAO,EAAE,UAAU,CAAC;gBAC9B,IAAI,EAAK,OAAO,SAAI,OAAS;gBAC7B,GAAG,EAAE,YAAG,CAAC,OAAO,EAAE,SAAS,CAAC;gBAC5B,IAAI,EAAE,YAAG,CAAC,OAAO,EAAE,UAAU,CAAC;gBAC9B,IAAI,EAAE,YAAG,CAAC,OAAO,EAAE,UAAU,CAAC;aAC/B,EAAE,IAAI,CAAC,oBAAoB,CAAC;SAC9B,CAAA;IACH,CAAC;IACD,oCAAa,GAAb;QACE,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,UAAU,CAAC,CAAA;IACpC,CAAC;IACH,mBAAC;AAAD,CAAC,AAzCD,CAAkC,0CAA+B,GAyChE;AAzCY,oCAAY","sourcesContent":["import { ChromeDebuggingProtocolLauncher } from 'xatom-debug-chrome-base/lib/launcher'\nimport { dirname, join } from 'path'\nimport { get, extend, pad } from 'lodash'\n\nexport class NodeLauncher extends ChromeDebuggingProtocolLauncher {\n  public binaryPath: string\n  public launchArguments: Array<string>\n  public environmentVariables: Object\n  public cwd: string\n  public scriptPath: string\n  getLauncherArguments () {\n    let debugArgs = [\n      `--inspect-brk=${this.portNumber}`\n    ]\n    if (get(this, 'scriptPath.length') > 0) {\n      debugArgs.push(this.quote(this.scriptPath))\n    }\n    let launcherArgs = debugArgs.concat(this.launchArguments)\n    return launcherArgs\n  }\n  getProcessOptions () {\n    if (!this.cwd) {\n      this.cwd = dirname(get(this, 'scriptPath', ''))\n    }\n    let envPath = get(process, 'env.PATH')\n    let npmPath = join(this.cwd, 'node_modules', '.bin')\n    return {\n      shell: true,\n      // windowsVerbatimArguments: true,\n      cwd: this.cwd,\n      env: extend({\n        SHELL: get(process, 'env.SHELL'),\n        TERM: get(process, 'env.TERM'),\n        TMPDIR: get(process, 'env.TMPDIR'),\n        USER: get(process, 'env.USER'),\n        PATH: `${npmPath}:${envPath}`,\n        PWD: get(process, 'env.PWD'),\n        LANG: get(process, 'env.LANG'),\n        HOME: get(process, 'env.HOME')\n      }, this.environmentVariables)\n    }\n  }\n  getBinaryPath (): string {\n    return this.quote(this.binaryPath)\n  }\n}\n"]}